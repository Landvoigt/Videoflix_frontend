<div @fadeInPage class="dialog-overlay" (click)="close()">
    <div class="dialog" (click)="$event.stopPropagation()">
        <div class="dialog-header">
            <h2>{{ isEdit ? 'Edit Profile' : 'Create Profile' }}</h2>
            <button class="close-btn" (click)="close()">Ã—</button>
        </div>
        <div class="space-y-6 mb-5">
            <label for="profileName" class="block text-lg font-medium leading-6 text-defaultTextColor">Enter Profile
                Name</label>
            <div class="mt-2 relative">
                <input id="profileName" type="text" [(ngModel)]="profile.name" maxlength="25"
                    class="block w-full rounded-lg border-0 py-2.5 text-gray-900 shadow-lg ring-1 ring-inset ring-gray-300 
                    placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-accentColor lg:text-lg lg:leading-6">
            </div>
        </div>
        <div class="dialog-body">
            <ng-container *ngFor="let pic of profileImages; let i = index">
                <div class="profile-image-wrapper">
                    <img (click)="selectImage(i)" [src]="pic" class="profile-image"
                        [ngClass]="{'active' : selectedImage === pic, 'keep-opacity' : selectedImage === null}">
                </div>
            </ng-container>
        </div>
        <div class="dialog-footer" [ngClass]="{'dialog-edit-footer' : isEdit}">
            <button *ngIf="isEdit" (click)="delete()" [disabled]="loading" 
                    class="btn-delete flex w-full justify-center rounded-lg bg-accentColor px-3 py-4 text-lg font-semibold 
                    leading-6 text-white shadow-lg hover:bg-accentColorHover focus-visible:outline 
                    focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accentColor 
                    disabled:opacity-60 disabled:hover:bg-accentColor">
                <span *ngIf="!loading && loadingBtn === 'add' || 'edit'">Delete</span>
                <div *ngIf="loading && loadingBtn === 'delete'" class="spinner"></div>
            </button>
            <button (click)="createOrEdit()" [disabled]="!selectedImage || profile.name.length <= 2 || loading" 
                    class="flex w-full justify-center rounded-lg bg-accentColor px-3 py-4 text-lg font-semibold 
                    leading-6 text-white shadow-lg hover:bg-accentColorHover focus-visible:outline 
                    focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accentColor 
                    disabled:opacity-60 disabled:hover:bg-accentColor">
                <span *ngIf="!loading || loadingBtn === 'delete'">{{ isEdit ? 'Edit' : 'Create' }}</span>
                <div *ngIf="loading && loadingBtn !== 'delete'" class="spinner"></div>
            </button>
        </div>
    </div>
</div>